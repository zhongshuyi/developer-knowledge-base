---
order: 3

author: 钟舒艺
---
# 变量与常量

## 声明

变量声明语法：

`数据类型 变量名 [= 变量值];'

例如：`int i = 10;`

变量名遵循以下规则：

1. 首字符必须是字母、下划线 (―)、美元符号 ($) 或者人民币符号 (¥)。
2. 标识符由数字 (0\~9)、大写字母 (A\~Z)、小写字母 (a\~z)、下划线 (―)、美元符号 ($)、人民币符号 (¥) 以及所有在十六进制 0xc0 前的 ASCII 码组成。
3. 不能把关键字、保留字作为标识符。
4. 标识符的长度没有限制。
5. 标识符区分大小写。

变量声明可以一行声明多个变量，不过不提倡，使用这种风格，逐一声明一个变量可以提高程序的可读性

```java
//一行声明 i 和 j 两个变量
int i , j;
```

## 初始化

可以先声明后初始化，也可以声明的时候初始化

```java
// 先声明后初始化
int i;
i = 8;
// 声明的时候初始化
int i = 8;
```

> **在 Java 中，变量的声明尽量靠近第一次使用的地方，这是一种良好的程序编写风格**

局部变量必须经过显式的初始化才能够使用，不然编译器会报错

对于类的成员变量，若没有被初始化，Java 虚拟机会先自动给它初始化为默认值

基本数据类型的默认值是 0，引用数据类型的默认值是 null

当数组变量实例化后，如果没有显式地为每个元素赋值，Java 会把该数组的所有元素初始化为相应类型的默认值 0

## 成员变量

成员变量是指在一个类中定义的变量

`[访问权限修饰符] [static] [final]<数据类型><变量名>`

访问权限修饰符有 public、protected、private，用于表示成员变量的访问权限。

static 表示是静态的，只会被初始化一次

final 表示将该变量声明成常量，是不可改变的

数据类型可以是基本数据类型，比如整型浮点型字符型，还可以是引用数据类型，比如字符串跟数组或是自定义的类

例如：

```java
public int studentno;
private String studentname;
public final boolean F; 
public static int a;
```

### 实例变量

实例变量，指没有被 static 修饰的成员变量。

每创建一个实例，Java 虚拟机就会为实例变量分配一次内存。

在类的内部，可以在非静态方法中直接访问实例变量。

在本类的静态方法或其他类中则需要通过类的实例对象进行访问。

```java
public class Test {

    /**
     * 实例变量。
     */
    public int a;

    public static void main(String[] args) {
        // 实例化
        Test test = new Test();
        System.out.println(test.a);
    }
}
```

### 静态变量

静态变量 (或称为类变量),指被 static 修饰的成员变量。

运行时，Java 虚拟机只为静态变量分配一次内存，在加载类的过程中完成静态变量的内存分配。

在类的内部，可以在任何方法内直接访问静态变量。

```java
public class Test {

    public static int a = 1;

    /**
     * 静态方法。
     */
    public static void staticMethod(){
        System.out.println(a);
    }

    /**
     * 成员方法。
     */
    public void method(){
        System.out.println(a);
    }
}
```

在其他类中，可以通过类名访问该类中的静态变量。

```java
class Test2{
    public static void main(String[] args) {
        // 可以通过类名与变量名的方式使用 Test 的变量 a
        System.out.println(Test.a);
    }
}
```

静态变量可以被类的所有实例共享，因此静态变量可以作为实例之间的共享数据，增加实例之间的交互性。

如果类的所有实例都包含一个相同的常量属性，则可以把这个属性定义为静态常量类型，从而节省内存空间

```java
public static int a;
```

## 局部变量

局部变量声明在方法、构造方法或者语句块中；

局部变量在方法、构造方法、或者语句块被执行的时候创建，当它们执行完成后，变量将会被销毁；

访问修饰符不能用于局部变量；

局部变量只在声明它的方法、构造方法或者语句块中可见；

局部变量是在栈上分配的。

局部变量没有默认值，所以局部变量被声明后，必须经过初始化，才可以使用。

```java
public class TestTwo {
    //以下四个变量都是成员变量（全局变量）
    int num ;                         //属于基本数据类型的实例变量
    Integer obj ;                     //属于引用数据类型的实例变量
    static char ch = 'A';             //类变量（静态变量）
    final double constant= 12.6;      //属于常量的实例变量

    // 局部代码快
    {
        // 只能在该代码块中使用
        int age = 1;
    }


    public void display(){
        //以下两个属于该方法的局部变量，必须先赋值才能使用，作用范围仅限于函数体之内
        int age = 1;
        String name = "Tom";
        System.out.println("name:"+name+";age: "+age);
    }


    public static void main(String[] args){
        System.out.println(num);           //这句会报错，因为 num 变量属于实例变量，只有将 Test 实例化之后才能使用
        System.out.println(TestTwo.ch);       //这句则不会报错，因为 ch 属于类变量，不用实例化 Test 也能使用

        TestTwo testTwo = new TestTwo();
        System.out.println(testTwo.num);      //num 为基本数据类型，打印出的默认值为 0
        System.out.println(testTwo.obj);      //obj 为引用数据类型，打印出的默认值为 null
    }
}
```

## 成员变量和局部变量的区别

1. 成员变量是独立于方法外的变量，局部变量是类的方法中的变量

   - 成员变量：包括实例变量和类变量，用 static 修饰的是类变量，不用 static 修饰的是实例变量，所有类的成员变量可以通过 this 来引用。
   - 局部变量：包括形参，方法局部变量，代码块局部变量，存在于方法的参数列表和方法定义中以及代码块中。
2. 成员变量可以被 public，protect，private，static 等修饰符修饰，而局部变量不能被控制修饰符及 static 修饰；两者都可以定义成 final 型。
3. 成员变量存储在堆，局部变量存储在栈。局部变量的作用域仅限于定义它的方法，在该方法的外部无法访问它。成员变量的作用域在整个类内部都是可见的，所有成员方法都可以使用它。如果访问权限允许，还可以在类的外部使用成员变量。
4. 局部变量的生存周期与方法的执行期相同。当方法执行到定义局部变量的语句时，局部变量被创建；执行到它所在的作用域的最后一条语句时，局部变量被销毁。类的成员变量，如果是实例成员变量，它和对象的生存期相同。而静态成员变量的生存期是整个程序运行期。
5. 成员变量在类加载或实例被创建时，系统自动分配内存空间，并在分配空间后自动为成员变量指定初始化值，初始化值为默认值，基本类型的默认值为 0，复合类型的默认值为 null。（被 final 修饰且没有 static 的必须显式赋值），局部变量在定义后必须经过显式初始化后才能使用，系统不会为局部变量执行初始化。
6. 局部变量可以和成员变量 同名，且在使用时，局部变量具有更高的优先级，直接使用同名访问，访问的是局部变量，如需要访问成员变量可以用 this.变量名访问

## 常量

参考 <http://www.51gjie.com/java/557.html>

在程序中存在大量的数据来代表程序的状态，其中有些数据在程序运行过程中值不能发生改变，这些数据在程序中被叫做常量。当然在实际的程序中，可以根据数据在程序运行中是否发生改变，来选择应该是使用变量代表还是常量代表。

Java 中用 final 修饰的成员变量表示常量，值一旦给定就无法改变！

### 作用

常量代表程序运行过程中不能改变的值。
常量在程序运行过程中主要有 2 个作用：

 1. 代表常数，便于程序的修改（例如：圆周率的值）
 2. 增强程序的可读性（例如：常量 UP、DOWN、LEFT 和 RIGHT 分辨代表上下左右，其数值分别是 1、2、3 和 4）

常量的语法格式和变量类型，只需要在变量的语法格式前面添加关键字 final 即可。在 Java 编码规范中，要求常量名必须大写。

### 常量值

常量值又称为字面常量，它是通过数据直接表示的

#### 整型常量值

1. 十进制数形式：如 54、-67、0。
2. 八进制数形式:Java 中的八进制常数的表示以 0 开头，如 0125 表示十进制数 85,-013 表示十进制数 -11。
3. 十六进制数形式:Java 中的十六进制常数的表示以 0x 或 0X 开头，如 0x100 表示十进制数 256,-0x16 表示十进制数 -22。

#### 实型常量值

1. 十进制数形式：由数字和小数点组成，且必须有小数点，如 12.34、-98.0。
2. 科学记数法形式：如 1.75e5 或 32&E3，其中 e 或 E 之前必须有数字，且 e 或 E 之后的数字必须为整数。

#### 布尔型常量值

Java 的布尔型常量只有两个值，即 false(假) 和 true(真)。

#### 字符型和字符串常量值

Java 的字符型常量值是用单引号引起来的一个字符，如 'e'、E'。需要注意的是，Java 字符串常量值中的单引号和双引号不可混用。双引号用来表示字符串，像 "11"、"d" 等都是表示单个字符的字符串。

### 定义常量

java 中，利用关键字 final 指示常量

`final double PI=3.1415;`

`final char MALE=‘M’，FEMALE=‘F’`

关键字 final 表示这个变量只能被赋值一次，一旦被赋值后就不能再更改了，也可以先声明，然后再进行赋值，但是只能赋值一次

```java
final int UP;
UP = 1;
```

>**习惯上，常量名使用全大写**
